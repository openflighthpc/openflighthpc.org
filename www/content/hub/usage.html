---
heading: Using the OpenFlightHPC Hub
---
<h2>Deploy the Hub</h2>
<button data-toggle="collapse" data-target="#deployhub" class="btn btn-outline-light">Show/Hide Instructions</button>
<div id="deployhub" class="collapse">
<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item">
    <a class="nav-link active" id="aws-tab" data-toggle="tab" href="#aws" role="tab" aria-controls="aws" aria-selected="true">AWS</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="azure-tab" data-toggle="tab" href="#azure" role="tab" aria-controls="azure" aria-selected="false">Azure</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="metal-tab" data-toggle="tab" href="#metal" role="tab" aria-controls="metal" aria-selected="false">Metal</a>
  </li>
</ul>


<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="aws" role="tabpanel" aria-labelledby="aws-tab">
    <ul>
        <li>Login to your aws account and navigate to EC2 > AMIs</li>
        <li>Change the filter to Public Images</li>
        <li>Search for `openflight-hub` and launch a copy of the latest release<br /><img src="/assets/img/aws/ami-01.png" width="100%"></img></li>
        <li>Select the instance type to use<br /><img src="/assets/img/aws/ami-02.png" width="100%"></img></li>
        <li>Configure the instance details (ensuring that a public IP is assigned)<br/><img src="/assets/img/aws/ami-03.png" width="100%"></img></li>
        <li>Configure storage space<br /><img src="/assets/img/aws/ami-04.png" width="100%"></img></li>
        <li>Name the instance<br /><img src="/assets/img/aws/ami-05.png" width="100%"></img></li>
        <li>Configure Security Group to include the following<br /><img src="/assets/img/aws/ami-06.png" width="100%"></img></li>
        <li>Launch the instance</li>
    </ul>
  </div>
  <div class="tab-pane fade" id="azure" role="tabpanel" aria-labelledby="azure-tab">
      <br />
      <p><b>Coming soon...</b></p>
  </div>
  <div class="tab-pane fade" id="metal" role="tabpanel" aria-labelledby="metal-tab">
      <br />
      <p><b>Coming soon...</b></p>
  </div>
</div>
</div>
<br />
<hr />

<h2>First Login and Cluster Configuration</h2>
<button data-toggle="collapse" data-target="#firstlogin" class="btn btn-outline-light">Show/Hide Instructions</button>
<div id="firstlogin" class="collapse">

<ul>
    <li>Login to hub
        <pre>
[user@myhost ~]$ ssh centos@HUB-IP</pre>
    </li>
    <li>On first login, there will be some configuration questions
        <pre>
                                   __ _ _       _     _  ==>
   ==>                            / _| (_)     | |   | |  ==>
  ==>   ___   _ __    ___  _ __  | |_| |_  __ _| |__ | |_  ==>
 ==>   / _ \ | '_ \  / _ \| '_ \ |  _| | |/ _` | '_ \| __|  ==>
==>   | (_) || |_) ||  __/| | | || | | | | (_| | | | | |_    ==>
 ==>   \___/ | .__/  \___||_| |_||_| |_|_|\__, |_| |_|\__|  ==>
  ==>        |_|                           __/ |           ==>
   ==>                                    |___/           ==>
    ==>


Deploying cloud resources requires either AWS or Azure access credentials.

For information on locating your cloud credentials, see:

    https://github.com/openflighthpc/flight-cloud#configuring-cloud-authentication

Continuing will remove the comments from the config file: /opt/flight/opt/cloud/etc/config.yaml
Do you wish to continue (y/n)? y
Configure aws (y/n)? y
What is the access_key_id? MyAWSaccessKeyID
What is the secret_access_key? MyAWSsecretAccessKey
What is the default_region? eu-west-1
Configure azure (y/n)? n


Name for the default cluster: mycluster
Finishing cluster configuration...
Generating Templates
aws: |================================================================================================================================|
azure: |==============================================================================================================================|
kickstart: |==========================================================================================================================|

OpenFlight Hub Configuration Complete!

To deploy your cluster:

1. Select AWS or Azure cluster (replace PLATFORM with aws' or 'azure')

    flight cloud cluster switch mycluster-PLATFORM

2. Deploy the domain

    flight cloud deploy domain

3. Deploy the gateway

    flight cloud deploy gateway1 -p "securitygroup,network1SubnetID=*domain"

4. Copy the SSH key to the gateway

    scp /root/.ssh/id_rsa root@GATEWAY-IP:/root/.ssh/

5. Deploy the nodes (example given: node01)

    flight cloud deploy node01 -p "securitygroup,network1SubnetID=*mycluster-domain"

</pre>
    </li>
    <li>The default cluster has now been configured and is ready for deployment</li>
</ul>

</div>

<hr />

<h2>Deploy Cluster</h2>
<button data-toggle="collapse" data-target="#deploycluster" class="btn btn-outline-light">Show/Hide Instructions</button>
<div id="deploycluster" class="collapse">
<ul class="nav nav-tabs" id="myTab2" role="tablist">
  <li class="nav-item">
    <a class="nav-link active" id="aws2-tab" data-toggle="tab" href="#aws2" role="tab" aria-controls="aws2" aria-selected="true">AWS</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="azure2-tab" data-toggle="tab" href="#azure2" role="tab" aria-controls="azure2" aria-selected="false">Azure</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="metal2-tab" data-toggle="tab" href="#metal2" role="tab" aria-controls="metal2" aria-selected="false">Metal</a>
  </li>
</ul>

<div class="tab-content" id="myTabContent2">
  <div class="tab-pane fade show active" id="aws2" role="tabpanel" aria-labelledby="aws2-tab">
    <ul>
        <li>Select AWS cluster
            <pre>
flight cloud cluster switch mycluster-aws</pre>
        </li>
        <li>Deploy the domain
            <pre>
flight cloud deploy domain</pre>
        </li>
        <li>Deploy the gateway
            <pre>
flight cloud deploy gateway1 -p "securitygroup,network1SubnetID=*domain"</pre>
        </li>
        <li>Copy the SSH key to the gateway (GATEWAY-IP can be found via <code>flight cloud aws list machines</code>)
            <pre>
scp /root/.ssh/id_rsa root@GATEWAY-IP:/root/.ssh/</pre>
        </li>
        <li>Deploy the nodes (example given: node01)
            <pre>
flight cloud deploy node01 -p "securitygroup,network1SubnetID=*domain"</pre>
        </li>
    </ul>
  </div>
  <div class="tab-pane fade" id="azure2" role="tabpanel" aria-labelledby="azure2-tab">
      <br />
      <p><b>Coming soon...</b></p>
  </div>
  <div class="tab-pane fade" id="metal2" role="tabpanel" aria-labelledby="metal2-tab">
      <br />
      <p><b>Coming soon...</b></p>
  </div>
</div>
</div>
